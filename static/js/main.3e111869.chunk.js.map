{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.jsx","components/Button/Button.jsx","services/pixabay-api.js","components/ImageGallery/ImageGallery.jsx","components/Searchbar/Searchbar.jsx","components/Modal/Modal.jsx","App.js","index.js"],"names":["ImageGalleryItem","webformatURL","largeImageURL","onOpenModal","className","onClick","src","alt","Button","type","API_KEY","BASE_URL","api","fetchPhotos","searchName","page","perPage","fetch","then","response","ok","json","Promise","reject","Error","Status","ImageGallery","state","images","error","isLoader","status","handleLoadMoreClick","e","setState","resetPage","prevProps","prevState","searchQuery","this","props","PixabayAPI","res","hits","catch","message","console","log","window","scrollTo","top","document","documentElement","scrollHeight","behavior","style","textAlign","length","map","id","color","Component","Searchbar","handleSearchChange","value","currentTarget","toLowerCase","handleFormSubmit","preventDefault","trim","onSubmit","reset","toast","autoComplete","autoFocus","placeholder","onChange","modalRoot","querySelector","Modal","handleKeyDownClick","code","onClose","handleBackdropClick","target","addEventListener","removeEventListener","createPortal","App","modalImageSrc","handleSubmit","toggleModal","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"yRAEaA,EAAmB,SAAC,GAAD,IAAGC,EAAH,EAAGA,aAAcC,EAAjB,EAAiBA,cAAeC,EAAhC,EAAgCA,YAAhC,OAC9B,oBAAIC,UAAU,mBAAd,SACE,qBACEC,QAAS,kBAAMF,EAAYD,IAC3BI,IAAKL,EACLM,IAAI,GACJH,UAAU,8BCRHI,EAAS,SAAC,GAAe,IAAdH,EAAa,EAAbA,QACtB,OACE,wBACEA,QAASA,EACTI,KAAK,SACLL,UAAU,SAHZ,wBCFEM,EAAU,qCACVC,EAAW,oEAYjB,IAIeC,EAJJ,CACTC,YAXF,WAAkE,IAA5CC,EAA2C,uDAA9B,GAAIC,EAA0B,uDAAnB,EAAGC,EAAgB,uDAAN,GACzD,OAAOC,MAAM,GAAD,OAAIN,EAAJ,aAAiBG,EAAjB,iBAAoCC,EAApC,gBAAgDL,EAAhD,qBAAoEM,IAC7EE,MAAK,SAACC,GACL,OAAGA,EAASC,GACHD,EAASE,OAEXC,QAAQC,OAAO,IAAIC,MAAJ,yJAAyCV,UCI/DW,EACE,OADFA,EAGM,WAHNA,EAIM,WAGCC,EAAb,4MACEC,MAAQ,CACNC,OAAQ,GACRC,MAAO,KACPC,UAAU,EACVf,KAAM,EACNgB,OAAQ,QANZ,EAkDEC,oBAAsB,SAACC,GACrB,EAAKC,UAAS,kBAAe,CAAEnB,KAAjB,EAAGA,KAA2B,OAnDhD,EAsDEoB,UAAY,WACV,EAAKD,SAAS,CAAEnB,KAAM,EAAGgB,OAAQN,KAvDrC,wDASE,SAAoBW,EAAWC,GAAa,IAAD,OACjCC,EAAgBC,KAAKC,MAArBF,YACAvB,EAASwB,KAAKZ,MAAdZ,KAER,GAAIqB,EAAUE,cAAgBA,GAAeD,EAAUtB,OAASA,EAAM,CAIpE,GAFAwB,KAAKL,SAAS,CAACJ,UAAU,IAEtBM,EAAUE,cAAgBA,EAU3B,OATAC,KAAKJ,iBAELM,EACC5B,YAAYyB,GACZpB,MAAK,SAAAwB,GACJ,EAAKR,SAAS,CAAEN,OAAQc,EAAIC,KAAMZ,OAAQN,EAAiBK,UAAU,OAEtEc,OAAM,SAAAf,GAAK,OAAI,EAAKK,SAAS,CAAEL,MAAOA,EAAMgB,QAASd,OAAQN,OAI9DqB,QAAQC,IAAI,SACXV,EAAUtB,OAASA,GAAiB,IAATA,GAC5B0B,EACC5B,YAAYyB,EAAavB,GACzBG,MAAK,SAAAwB,GACN,EAAKR,UAAS,gBAAEN,EAAF,EAAEA,OAAF,MAAc,CAAEA,OAAO,GAAD,mBAAMA,GAAN,YAAiBc,EAAIC,OAAOZ,OAAQN,EAAiBK,UAAU,MAEnGkB,OAAOC,SAAS,CACdC,IAAKC,SAASC,gBAAgBC,aAC9BC,SAAU,cAIXV,OAAM,SAAAf,GAAK,OAAI,EAAKK,SAAS,CAAEL,MAAOA,EAAMgB,QAASd,OAAQN,UA1CtE,oBA0DE,WAAU,IAAD,OACP,EAA4Cc,KAAKZ,MAAzCC,EAAR,EAAQA,OAAQG,EAAhB,EAAgBA,OAAQF,EAAxB,EAAwBA,MAAOC,EAA/B,EAA+BA,SACvBQ,EAAgBC,KAAKC,MAArBF,YAIR,OAHAQ,QAAQC,IAAI,gCAAuBnB,GACnCkB,QAAQC,IAAIR,KAAKZ,OAEH,SAAXI,EAA2B,KAEhB,aAAXA,EAA+B,oBAAIwB,MAAO,CAACC,UAAW,UAAvB,SAAmC3B,IAEvD,aAAXE,EACwB,IAAlBH,EAAO6B,OACZ,qCACE,oBAAIrD,UAAU,eAAd,SACGwB,EAAO8B,KAAK,gBAAGC,EAAH,EAAGA,GAAI1D,EAAP,EAAOA,aAAcC,EAArB,EAAqBA,cAArB,OACX,cAAC,EAAD,CACEC,YAAa,EAAKqC,MAAMrC,YAExBF,aAAcA,EACdC,cAAeA,GAFVyD,QAMT7B,GAAY,cAAC,IAAD,CAAQ1B,UAAU,SAASK,KAAK,YAAYmD,MAAM,YAE9DhC,EAAO6B,OAAS,KAAO,GAAK,cAAC,EAAD,CAAQpD,QAASkC,KAAKP,yBAIlD,qBAAIuB,MAAO,CAACC,UAAW,UAAvB,iDAAuElB,EAAvE,YAnBR,MApEJ,GAAkCuB,a,OChBrBC,EAAb,4MACEnC,MAAQ,CACNW,YAAa,IAFjB,EAKEyB,mBAAqB,YAAwB,IACnCC,EADkC,EAApBC,cACdD,MAER,EAAK9B,SAAS,CAAEI,YAAa0B,EAAME,iBARvC,EAWEC,iBAAmB,SAAClC,GAClB,IAAQK,EAAgB,EAAKX,MAArBW,YACRL,EAAEmC,iBAEwB,KAAvB9B,EAAY+B,QAIf,EAAK7B,MAAM8B,SAAShC,GACpB,EAAKiC,SAJHC,IAAM3C,MAAN,8EAhBN,EAuBE0C,MAAQ,WACN,EAAKrC,SAAS,CAACI,YAAa,MAxBhC,4CA2BE,WACE,IAAOA,EAAeC,KAAKZ,MAApBW,YACP,OACE,wBAAQlC,UAAU,YAAlB,SACE,uBAAMkE,SAAU/B,KAAK4B,iBAAmB/D,UAAU,aAAlD,UACE,wBAAQK,KAAK,SAASL,UAAU,oBAAhC,SACE,sBAAMA,UAAU,0BAAhB,sBAGF,uBACEA,UAAU,mBACVK,KAAK,OACLgE,aAAa,MACbT,MAAO1B,EACPoC,WAAS,EACTC,YAAY,2BACZC,SAAUrC,KAAKwB,8BA3C3B,GAA+BF,aCDzBgB,EAAY1B,SAAS2B,cAAc,eAG5BC,EAAb,4MAUEC,mBAAqB,SAAA/C,GACL,WAAXA,EAAEgD,MACH,EAAKzC,MAAM0C,QAAQ,KAZzB,EAgBEC,oBAAsB,SAAAlD,GACjBA,EAAEgC,gBAAkBhC,EAAEmD,QACvB,EAAK5C,MAAM0C,QAAQ,KAlBzB,uDAEE,WACElC,OAAOqC,iBAAiB,UAAW9C,KAAKyC,sBAH5C,kCAME,WACEhC,OAAOsC,oBAAoB,UAAW/C,KAAKyC,sBAP/C,oBAsBE,WACE,OAAOO,uBACL,qBAAKnF,UAAU,UAAUC,QAASkC,KAAK4C,oBAAvC,SACE,qBAAK/E,UAAU,QAAf,SACE,qBAAKE,IAAMiC,KAAKC,MAAMlC,IAAMC,IAAI,SAGpCsE,OA7BN,GAA2BhB,aCkCZ2B,E,4MA9Bb7D,MAAQ,CACNW,YAAa,GACbmD,cAAe,I,EAGjBC,aAAe,SAAApD,GACV,EAAKX,MAAMW,cAAgBA,EAI9B,EAAKJ,SAAS,CAACI,gBAHbkC,YAAM,gBAAD,OAAiBlC,EAAjB,oB,EAMTqD,YAAc,SAACrF,GAAD,OAAS,EAAK4B,SAAS,CAAGuD,cAAenF,K,4CAEvD,WACE,MAAuCiC,KAAKZ,MAApCW,EAAR,EAAQA,YAAamD,EAArB,EAAqBA,cACrB,OACE,sBAAKrF,UAAU,MAAf,UAEGqF,GAAiB,cAAC,EAAD,CAAOnF,IAAKmF,EAAeP,QAAS3C,KAAKoD,cAC3D,cAAC,IAAD,CAAgBC,UAAW,OAC3B,cAAC,EAAD,CAAWtB,SAAU/B,KAAKmD,eAC1B,cAAC,EAAD,CAAcvF,YAAaoC,KAAKoD,YAAarD,YAAaA,W,GAxBhDuB,a,YCFlBgC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF5C,SAAS6C,eAAe,W","file":"static/js/main.3e111869.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\r\n\r\nexport const ImageGalleryItem = ({ webformatURL, largeImageURL, onOpenModal }) => (\r\n  <li className=\"ImageGalleryItem\">\r\n    <img \r\n      onClick={() => onOpenModal(largeImageURL)}\r\n      src={webformatURL} \r\n      alt=\"\" \r\n      className=\"ImageGalleryItem-image\" \r\n    />\r\n  </li>\r\n);\r\n\r\nImageGalleryItem.propTypes = {\r\n  webformatURL: PropTypes.string.isRequired, \r\n  largeImageURL: PropTypes.string.isRequired,\r\n  onOpenModal: PropTypes.func.isRequired,\r\n}","export const Button = ({onClick}) => {\r\n  return (\r\n    <button \r\n      onClick={onClick} \r\n      type=\"button\" \r\n      className=\"Button\"\r\n    >\r\n    Load more\r\n    </button>\r\n  )\r\n};\r\n\r\n","const API_KEY = '21948076-53f9c976759f5ce811ed96a6f';\r\nconst BASE_URL = 'https://pixabay.com/api/?image_type=photo&orientation=horizontal&';\r\n\r\nfunction fetchPhotos( searchName = '', page = 1, perPage = 12 )  {\r\n  return fetch(`${BASE_URL}q=${searchName}&page=${page}&key=${API_KEY}&per_page=${perPage}`)\r\n    .then((response) => {\r\n      if(response.ok) {\r\n        return response.json()\r\n      }\r\n      return Promise.reject(new Error(`Немає зображень за запитом: ${searchName}`))\r\n    })\r\n};\r\n\r\nconst api ={\r\n  fetchPhotos\r\n};\r\n\r\nexport default api;","import { Component } from 'react';\r\nimport PropTypes from 'prop-types'\r\n\r\nimport Loader from \"react-loader-spinner\";\r\nimport { ImageGalleryItem } from 'components/ImageGalleryItem';\r\nimport { Button } from 'components/Button';\r\nimport PixabayAPI from 'services/pixabay-api';\r\n\r\n// const styles = {\r\n//   marginLeft: 'auto',\r\n//   marginRight: 'auto', \r\n// }\r\n\r\nconst Status = {\r\n  IDLE: 'idle',\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n}\r\n\r\nexport class ImageGallery extends Component  {\r\n  state = {\r\n    images: [],\r\n    error: null,\r\n    isLoader: false,\r\n    page: 1,\r\n    status: 'idle',\r\n  };\r\n\r\n  componentDidUpdate( prevProps, prevState ) {\r\n    const { searchQuery } = this.props;\r\n    const { page } = this.state;\r\n    \r\n    if( prevProps.searchQuery !== searchQuery || prevState.page !== page) {\r\n      // this.setState({ status: Status.PENDING })\r\n      this.setState({isLoader: true})\r\n\r\n      if(prevProps.searchQuery !== searchQuery) {\r\n        this.resetPage();\r\n\r\n        PixabayAPI\r\n        .fetchPhotos(searchQuery)\r\n        .then(res => {          \r\n          this.setState({ images: res.hits, status: Status.RESOLVED, isLoader: false})\r\n        })\r\n        .catch(error => this.setState({ error: error.message, status: Status.REJECTED }))\r\n\r\n        return;\r\n      }\r\n        console.log('Hello')\r\n      if(prevState.page !== page && page !== 1)  {\r\n        PixabayAPI\r\n        .fetchPhotos(searchQuery, page)\r\n        .then(res => {\r\n        this.setState(({images}) =>({ images: [...images, ...res.hits], status: Status.RESOLVED, isLoader: false }))\r\n        \r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n\r\n        })        \r\n        .catch(error => this.setState({ error: error.message, status: Status.REJECTED }))\r\n      }\r\n\r\n      // this.setState({isLoader: false})\r\n    };\r\n\r\n  };\r\n\r\n  handleLoadMoreClick = (e) => {\r\n    this.setState(({ page }) => ({ page: page + 1 }))\r\n  };\r\n\r\n  resetPage = () => {\r\n    this.setState({ page: 1, status: Status.IDLE })\r\n  }\r\n\r\n  render() {\r\n    const { images, status, error, isLoader } = this.state;\r\n    const { searchQuery } = this.props\r\n    console.log(\"🚀 ~ GALLERY IMAGES\", images)\r\n    console.log(this.state)\r\n    \r\n    if(status === 'idle') {return null};\r\n\r\n    if(status === 'rejected') {return <h1 style={{textAlign: 'center'}}>{error}</h1>};\r\n    \r\n    if(status === 'resolved') {\r\n      return images.length !== 0 ? (\r\n        <>\r\n          <ul className=\"ImageGallery\">            \r\n            {images.map( ({ id, webformatURL, largeImageURL }) => (\r\n              <ImageGalleryItem \r\n                onOpenModal={this.props.onOpenModal} \r\n                key={id} \r\n                webformatURL={webformatURL} \r\n                largeImageURL={largeImageURL}/>\r\n            ))}         \r\n          </ul>\r\n\r\n          { isLoader && <Loader className=\"Loader\" type=\"ThreeDots\" color=\"#3f51b5\" />}\r\n          \r\n          { images.length % 12 === 0 && <Button onClick={this.handleLoadMoreClick} /> }            \r\n        \r\n        </>\r\n          ): (            \r\n            <h2 style={{textAlign: 'center'}}>Sorry, nothing was found for query '{searchQuery}'</h2>\r\n          )         \r\n    };\r\n  };\r\n};\r\n\r\nImageGallery.propTypes = {\r\n  images: PropTypes.array,\r\n  error: PropTypes.string,\r\n  isLoader: PropTypes.bool,\r\n  page: PropTypes.number,\r\n  status: PropTypes.string,\r\n};\r\n\r\n// if(status === 'pending') {\r\n//   return (\r\n//     <Loader \r\n//       style={{\r\n//         marginLeft: 'auto',\r\n//         marginRight: 'auto',\r\n//       }}\r\n//         color=\"#3f51b5\" \r\n//     />\r\n// )};","import { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport class Searchbar extends Component  {\r\n  state = {\r\n    searchQuery: '',\r\n  };\r\n\r\n  handleSearchChange = ({ currentTarget }) => {\r\n    const { value } = currentTarget;\r\n    \r\n    this.setState({ searchQuery: value.toLowerCase() });\r\n  };\r\n\r\n  handleFormSubmit = (e) => {\r\n    const { searchQuery } = this.state;\r\n    e.preventDefault();\r\n\r\n    if(searchQuery.trim() === '') {\r\n      toast.error(`Введіть текст`);\r\n      return;\r\n    }\r\n    this.props.onSubmit(searchQuery)\r\n    this.reset();\r\n  }\r\n\r\n  reset = () => {\r\n    this.setState({searchQuery: ''});\r\n  }\r\n\r\n  render() {\r\n    const {searchQuery} = this.state;\r\n    return (\r\n      <header className=\"Searchbar\">\r\n        <form onSubmit={this.handleFormSubmit}  className=\"SearchForm\">\r\n          <button type=\"submit\" className=\"SearchForm-button\">\r\n            <span className=\"SearchForm-button-label\">Search</span>\r\n          </button>\r\n  \r\n          <input\r\n            className=\"SearchForm-input\"\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            value={searchQuery}\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleSearchChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    )\r\n  };\r\n  \r\n};\r\n\r\nSearchbar.propTypes = {\r\n  searchQuery: PropTypes.string\r\n};","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.querySelector('#modal-root')\r\n\r\n\r\nexport class Modal extends Component {\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDownClick)\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDownClick);\r\n  };\r\n\r\n  handleKeyDownClick = e => {\r\n    if(e.code === 'Escape') {\r\n      this.props.onClose('');\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = e => {\r\n    if(e.currentTarget === e.target) {\r\n      this.props.onClose('');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\r\n        <div className=\"Modal\">\r\n          <img src={ this.props.src } alt=\"\" />\r\n        </div>\r\n      </div>,\r\n      modalRoot)\r\n  };\r\n    \r\n};\r\n\r\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\n// Components //\nimport { ImageGallery } from 'components/ImageGallery';\nimport { Searchbar } from 'components/Searchbar';\nimport { Modal } from 'components/Modal';\nimport { ToastContainer, toast } from 'react-toastify';\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n    modalImageSrc: '',\n  };\n\n  handleSubmit = searchQuery => {\n    if(this.state.searchQuery === searchQuery) {\n      toast(`Search name '${searchQuery}' already used`)\n      return;\n    }\n    this.setState({searchQuery})\n  };\n\n  toggleModal = (src) => this.setState({  modalImageSrc: src });\n\n  render() {\n    const { searchQuery, modalImageSrc } = this.state;\n    return (\n      <div className=\"App\">\n        \n        {modalImageSrc && <Modal src={modalImageSrc} onClose={this.toggleModal}/>}\n        <ToastContainer autoClose={1500}/>\n        <Searchbar onSubmit={this.handleSubmit} />\n        <ImageGallery onOpenModal={this.toggleModal} searchQuery={searchQuery} />\n      </div>\n    );\n  };\n  \n};\n\nexport default App;\n\nApp.propTypes = {\n  searchQuery: PropTypes.string,\n  modalImageSrc: PropTypes.string,\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport 'react-toastify/dist/ReactToastify.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}